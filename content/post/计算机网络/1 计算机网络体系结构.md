---
date: 2024-01-18 17:06:34
title: 1 计算机网络体系结构
categories:
  - 计算机网络
---
## What is a computer network
### 概念
#### 计算机网络和分布式系统

计算机网络 (Computer Networks)：由==自主计算机互联起来的集合体== (a group of  interconnected  computers)，与主从计算的的区别，每台计算机都有独立的操作系统，不从属某台主机。

分布式系统 (Distributed  System)：对用户看起来是一个==单独系统==的计算机集合。存在着一个能为用户自动管理资源的网络操作系统。

关系：计算机网络是分布式系统的技术基础，而分布式系统是计算机网发展的高级阶段。www是原型在Internet的分布式系统。 
### 组成
#### 从组成部分看
一个完整的计算机网络主要由==硬件、软件、协议==三大部分组成，缺一不可。
==硬件==主要由主机（也称端系统）、通信链路（如双绞线、光纤）、交换设备（如路由器、交换机等）和通信处理机（如网卡）等组成。
==软件==主要包括各种实现资源共享的软件和方便用户使用的各种工具软件（如网络操作系统、邮件收发程序、 FTP 程序、聊天程序等）。软件部分多属千应用层。
==协议==是计算机网络的核心，如同交通规则制约汽车 驾驶一样，协议规定了网络传输数据时所遵循的规范。
#### 从工作方式上看
计算机网络（这里主要指 Internet,即因特网）可分为==边缘部分和核心部分==。
==边缘部分==由所有连接到因特网上、供用户直接使用的主机组成，用来进行通信（如 传输数据、音频或视频）和资源共享；
==核心部分==由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。图I. I 给出了这两部分的示意图。
#### 从功能组成上
计算机网络由==通信子网和资源子网==组成。
==通信子网==由各种传输介质、 通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力， 实现联网计算机之间的数据通信。
==资源子网==是实现资源共享功能的设备及其软件的集合， 向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务。
### 功能
1. ==数据通信==是计算机网络最基本和最重要的功能，用来实现联网计算机之间各种信息的传输，并将分散在不同地理位置的计算机联系起来，进行统一的调配、控制和管理。例如，文件传输、电子邮件等应用，离开了计算机网络将无法实现。
2. ==资源共享==可以是软件共享、数据共享，也可以是硬件共享。它使计算机网络中的资源互通有无、分工协作，从而极大地提高硬件资源、软件资源和数据资源的利用率。
3. ==分布式存储==：当计算机网络中的某个计算机系统负荷过重时，可以将其处理的某个复杂任务分配给网络中的其他计算机系统，从而利用空闲计算机资源以提高整个系统的利用率。
4. ==提高可靠性==：计算机网络中的各台计算机可以通过网络互为替代机。
5. ==负载均衡==：将工作任务均衡地分配给计算机网络中的各台计算机。

## Categories of computer network

### 按分布范固分类

#### 广域网 (WAN) 

广域网的任务是==提供长距离通信==，运送主机所发送的数据，其覆盖范围通常是直径为几十千米到几于千米的区域，因而有时也称远程网。广域网是因特网的核心部分。连接广域网的各结点交换机的链路一般都是==高速链路==，具有较大的==通信容址==。

### 城域网(MAN) 

城域网的覆盖范围可以跨越几个街区甚至整个城市，覆盖区域的直径范围是 5~50km。城域网大多采用==以太网==技术，因此有时也常并入局域网的范围讨论。

### 局域网 (LAN) 

局域网一般用微机或工作站通过高速线路相连，覆盖范围==较小==，通常是直径为几十米到几千米的区域。局域网在计算机配置的数量上没有太多的限制，少的可以只有两台，多的可达几百台。传统上，局域网使用==广播==技术，而广域网使用==交换==技术。

局域网 (LAN，Local Area Network)，LAN 是包含在较小地理区域内的网络，通常位于同一建筑物内。家庭 WiFi 网络和小型企业网络是常见的 LAN 示例。

局域网络被广泛用来连接个人计算机和消费类电子设备，使它们能够共享资源（比如打印机）和交换信息。

无线的LAN如今已经无处不在，在这些系统中，每台计算机都有一个无线调制解调器和一个天线，用来与其他计算机通信。接下来我们就来了解局域网的构成。

在大多数情况下，LAN中的每台计算机会与一个接入点(AP, Access Point)、无线路由器(wireless router)或者基站(base station)的设备进行通信。它主要负责中继无线计算机之间的数据包，还负责中继无线计算机和Internet 之间的数据包。

接下来我们逐个来理解它们的概念。

### 接入点(AP)

无线接入点（AP 或 WAP）是允许 Wi-Fi 设备连接到有线网络的网络设备。它主要是提供无线工作站对有线局域网和从有线局域网对无线工作站的访问，在访问接入点覆盖范围内的无线工作站可以通过它进行相互通信。

简单来说，就是**提供无线网络的设备**，它有线连接在局域网内。

[![img](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/202307270911331.webp)](https://image.hoyue.fun/imgup/2023/05/202307270911331.webp)

### 路由

在理解路由器之前，先了解一下什么是路由。网络路由（routing）是选择一个或多个网络上的路径的过程。在诸如互联网等数据包交换网络中，路由选择互联网协议 (IP) 数据包从其起点到目的地的**路径**。这些互联网路由决定由称为路由器的专用网络硬件做出。

简单来说，路由是寻找路径的过程。网络中两个计算机之间有很多个网络相连，它们的路径有很多种，路由是找到这些路径的过程，如图：

[![img](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/202307270821834.webp)](https://image.hoyue.fun/imgup/2023/05/202307270821834.webp)

要从计算机 A 到达计算机 B 的数据包，它应该通过网络 1、3 和 5 还是通过网络 2 和 4？数据包通过网络 2 和 4 的路径会更短，但是网络 1、3 和 5 在转发数据包时可能比 2 和 4 更快。这些都是网络路由器(Router)不断做出的选择类型。

在路由中，任播(anycast)是一种网络寻址和路由的策略，使得数据可以根据路由拓朴来决定送到“最近”或“最好”的目的地。

### 路由器

路由器(Router)是一种网络硬件，**负责将数据包转发到目的地**。路由器连接到两个或多个 IP 网络或子网，并根据需要在它们之间传递数据包。

为了有效地引导数据包，路由器使用一个内部路由表——一个通往不同网络目的地的路径列表。路由器读取数据包的标头以确定其去向，然后查阅路由表以找出通往该目的地的最有效路径。然后，它将数据包转发到该路径中的下一个网络。

现在的无线路由器是一个AP、路由器和交换机的集合体，支持有线无线组成同一子网并具有路由功能。它组成的网络称为无线局域网(WLAN)

### 交换机

网络交换机(switch)是连接网络内的设备，并向或从这些设备**转发**数据包。与路由器不同，交换机仅将数据发送到它打算发送的**单个设备**（可以是另一台交换机、路由器或用户的计算机），而不是发送到多个设备的网络。如图：

[![img](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/202307270843238.webp)](https://image.hoyue.fun/imgup/2023/05/202307270843238.webp)

举个例子，交换机就像是接口拓展坞一样，将数据转发都其他设备去。

### 基站

基站（Base Station），是公用移动通信基站，是**移动设备接入互联网的接口设备**，也是无线电台站的一种形式，是指在一定的无线电覆盖区中，通过移动通信交换中心，与移动电话终端之间进行信息传递的无线电收发信电台。

------

### 以太网

国际上为LAN规定了一些标准，其中有线连接里IEEE 802.3是迄今为止最常见的一种**有线**局域网，我们称为以太网(Ethernet)。

每台计算机按照以太网协议规定的方式运行，通过一条点到点链路连接到交换机，交换机根据每个数据包中的地址来确定这个数据包要发送给哪台计算机。如图：

[![img](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/202307270859545.webp)](https://image.hoyue.fun/imgup/2023/05/202307270859545.webp)这个会在之后的章节中仔细说明。![](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/202307270843238-20240119205415112.webp)

#### 个人区域网(Personal Area Network)

个人区域网 (PAN, Personal Area Network) 允许设备围绕着一个人进行通信。简单来说，就是==非常有限距离的连接==，其中最著名的例子就是蓝牙耳机和智能手机之间的连接。

个人区域网连接可以是有线或无线的。#card

- 有线连接方式包括 USB 和 FireWire；无线连接方式包括蓝牙（Bluetooth）、WiFi、IrDA 和 Zigbee。h
- 有线连接长度取决于连接线，而无线连接——WPAN(Wireless Personal Area Network) 的范围通常非常小，例如蓝牙等短距离无线协议在大于 5-10 米的距离上效率不高。

### 按传输技术分类

- 广播式网络。
	- 所有联网计算机都共享==一个公共通信信道==。当一台计算机利用共享通信信道发送报文分组时，所有其他的计算机都会“收听”到这个分组。接收到该分组的计算机将通过检查目的地址来决定是否接收该分组。
	- ==局域网==基本上都采用广播式通信技术，广域网中的无线、卫星通信网络也采用广播式通信技术。
- 点对点网络。
	- ==每条物理线路连接一对计算机==。
	- 若通信的两台主机之间没有直接连接的线路，则它们之间的分组传输就要通过中间结点进行接收、存储和转发，直至目的结点。、

目前普遍使用的传输技术有两种，分别是==广播式链路和点到点链路==

==点到点（point-to-point）==链路将一对单独的机器连接起来。在一个由点到点链路组成的网络中，为了从源端到达接收方，短消息必须首先访问一个或多个中间机器，这种短消息在某些情况下称为数据包或包(packet)。

通常在网络中有可能存在多条不同长度的路由，因此，找到一条好的路由对点-点网络非常重要。点-点传输只有一个发送方和一个接收方，有时候也称为==单播（unicasting）==

相反，在一个==广播(boradcasting)==网络上，通信信道被网络上的所有机器所共享；任何一台机器发出的数据包能被所有其他任何机器收到。无线网络是广播链路的一个常见例子，一个覆盖区域内的通信由所有该区域内的机器共享，而该区域的划分取决于无线信道和传输机器。

有些广播系统还支持给一组机器发送数据包的模式，这种传输模式称为==组播（multicasting）==

### 按拓扑结构分类

网络拓扑结构是指由网中结点（路由器、主机等）与通信线路（网线）之间的几何关系（如 总线形、环形）表示的网络结构，主要指通信子网的拓扑结构。
按网络的拓扑结构，主要分为总线形、星形、环形和网状网络等。#card
![](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/20240118184111.png)
1. 总线形网络。用单根传输线把计算机连接起来。总线形网络的优点是建网容易、增／减结点方便、节省线路。缺点是重负载时通信效率不高、总线任意一处对故障敏感。
2. 星型网络。每个终端或计算机都以单独的线路与中央设备相连。中央设备早期是计算机，现在一般是交换机或路由器。星形网络便于集中控制和管理，因为端用户之间的通信必须经过中央设备。缺点是成本高、中央设备对故障敏感。
3. 环形网络。所有计算机接口设备连接成一个环。环形网络最典型的例子是令牌环局域网。环可以是单环，也可以是双环，环中信号是单向传输的。
4. 网状网络。一般情况下，每个结点至少有两条路径与其他结点相连，多用在广域网中。

星形、总线形和环形网络多用于局域网，网状网络多用于广域网。

### 按交换技术分类
交换技术是指各台主机之间、各通信设备之间或主机与通信设备之间为交换信息所采用的数 据格式和交换装置的方式。按交换技术可将网络分为如下几种。
1. 电路交换网络。==在源结点和目的结点之间建立一条专用的通路用于传送数据，包括建立连接、传输数据和断开连接三个阶段。==最典型的电路交换网是传统电话网络。该类网络的主要特点是整个报文的比特流连续地从源点直达终点，好像是在一条管道中传 送。优点是数据直接传送、时延小。缺点是线路利用率低、不能充分利用线路容盘、不便于进行差错控制。
2. 报文交换网络。用户数据加上源地址、目的地址、校验码等辅助信息，然后封装成报文。整个报文传送到相邻结点，全部存储后，再转发给下一个结点，重复这一过程直到到达目的结点。每个报文可以单独选择到达目的结点的路径。报文交换网络也称==存储－转发网==络，主要特点是==整个报文先传送到相邻结点，全部存储后查找转发表，转发到下一个结点。==优点是可以较为充分地利用线路容量，可以实现不同链路之间不同数据传输速率的转换，可以实现格式转换，可以实现一对多、多对一的访问，可以实现差错控制。缺点是增大了资源开销（如辅助信息导致处理时间和存储资源的开销），增加了缓冲时延，需要额外的控制机制来保证多个报文的顺序不乱序，缓冲区 难以管理（因为报文的大小不确定，接收方在接收到报文之前不能预知报文的大小）。
3. 分组交换网络，也称包交换网络。其原理是，将数据分成较短的固定长度的数据块，在每个数据块中加上目的地址、源地址等辅助信息组成分组（包），以存储－转发方式传输。 其主要特点是==单个分组（它只是整个报文的一部分）传送到相邻结点，存储后查找转发表，转发到下一个结点。==除具备报文交换网络的优点外，分组交换网络还具有自身的优点：缓冲易于管理；包的平均时延更小，网络占用的平均缓冲区更少；更易于标准化；更适合应用。现在的主流网络基本上都可视为分组交换网络。

计算机网络(computer network)是通信网络的一种，被称为数据网络(data networks)。而数据网络是一种使用数字传输的通信网络。通常来说，数据是离散的信号，数据被封装成称为数据报(Datagram)的信息，并通过一些中间网络设备从源发送到目的地。例如以太网。

相反的，语音网络使用模拟信号传输，它是连续的信号。通常来说，语音流(voice stream)通过预先建立的连接（称为电路circuit）从源头转发到目的地。例如电话网络。

## 性能指标

- **带宽(Bandwidth)**。本来表示通信线路允许通过的信号频带范围，单位是赫兹(Hz) 。而 在计算机网络中，带宽表示==网络的通信线路所能传送数据的能力==，是数字信道所能传送 的“最高数据传输速率”的同义语，单位是比特／秒 (bis) 。
- **时延(Delay)**。指数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间，它由 4 部分构成：==发送时延、传播时延、处理时延和排队时延==。
	- **发送时延**。结点将分组的所有比特推向（传输）链路所需的时间，即从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间，因此也称传输时延。计算公式为==发送时延＝分组长度／信道宽度==
	- **传播时延**。电磁波在信道中传播一定的距离需要花费的时间，即一个比特从链路的一端传播到另一端所用的时间。计算公式为==传播时延＝信道长度／电磁波在信道上的传播速率==
	- **处理时延**。数据==在交换结点为存储转发而进行的工作==所花费的时间。例如，分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等。
	- **排队时延**。分组在进入路由器后要先在输入队列中排队等待处理。路由器确定转发端口后，还要在输出队列中排队等待转发，这就产生了排队时延。
- 时延带宽积。指发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特，因此又称以比特为单位的链路长度，即==时延带宽积＝传播时延×信道带宽==。 
	- 考虑一个代表链路的圆柱形管道，其长度表示链路的传播时延，横截面积表示链路带宽，则时延带宽积表示该管道可以容纳的比特数量。
	- ![](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/20240118215417.png)
- **往返时延** (Round-Trip Time, RTT) 。指==从发送端发出一个短分组，到发送端收到来自接收端的确认（接收端收到数据后立即发送确认），总共经历的时延。==在互联网中，往返时延还包括各中间结点的处理时延、排队时延及转发数据时的发送时延。
- **吞吐量(Throughput)**。指==单位时间内通过某个网络（或信道、接口）的数据量==。吞吐量受网络带宽或网络额定速率的限制。
- **速率 (Speed)** 。网络中的速率是指连接到计算机网络上的主机在数字信道上传送数据的速率，也称==数据传送速率、数据率或比特率==，单位为 b/s （比特／秒） （或 bit/s, 有时也写为bps) 。数据率较高时，可用 kb/s (k= 10^3) 、 Mb/s (M= 10^6) 或 Gb/s (G= 10^9) 表示。 在计算机网络中，通常把最高数据传输速率称为带宽。
- 信道利用率。指出某一信道有百分之多少的时间是有数据通过的，即==信道利用率＝有数据通过时间／（有＋无）数据通过时间==。
## Network architecture
### 计算机网络分层结构
分层的基本原则如下：

l) 每层都实现一种相对独立的功能，降低大系统的复杂度。

2) 各层之间的接口自然清晰，易千理解，相互交流尽可能少。

3) 各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现。

4) 保待下层对上层的独立性，上层单向使用下层提供的服务。

5) 整个分层结构应能促进标准化工作。
网络协议：为实现网络中的数据交换而建立的规则标准或约定。

三要素：
语法：数据与控制信息的格式。
语义：需要发出何种控制信息，完成何种动作，做出何种响应。
同步：事件实现顺序的详细说明。

计算机网络的各层及其协议的媒合称为网络的体系结构 (Architecture) 。换言之，计算机网 络的体系结构就是这个计算机网络及其所应完成的功能的精确定义。要强调的是，这些功能究竞 是用何种硬件或软件完成的，是一个遵循这种体系结构的实现（Implementation) 问题。体系结构 是抽象的，而实现则是具体的，是贞正在运行的计算机硬件和软件。计算机网络体系结构通常都 具有可分层的特性，它将复杂的大系统分成若干较容易实现的层次。

分层的基本原则如下：

l) 每层都实现一种相对独立的功能，降低大系统的复杂度。

2) 各层之间的接口自然清晰，易千理解，相互交流尽可能少。

3) 各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现。

4) 保待下层对上层的独立性，上层单向使用下层提供的服务。

5) 整个分层结构应能促进标准化工作。 在计算机网络分层结构中，第 n 层中的活动元索通常称为第 n 层实体。具体来说，实体指任 何可发送或接收信息的硬件或软件进程，通常是某个特定的软件模块。不同机器上的同一层称为 对等层，同一层的实体称为对等实体。第 n 层实体实现的服务为第 n+l 层所用。在这种悄况下， 第 n 层称为服务提供者，第 n+l 层则服务于用户。

在计算机网络体系结构中，对等层之间传送的数据单位称为该层的协议数据单元 (POU),

第 n 层的 PDU 记为 n-PDU 。各层的 PDU 都分为数据和控制信息两部分。

服务数据单元 CSDU): 为完成用户所要求的功能而传送的数据。第 n 层的 SDU 记为 n-SDU 。

协议控制信息 (PC!): 控制协议操作的信息。第 n 层的 PCI 记为 n-PCl 。 每层的协议数据单元都有一个通俗的名称，如物理层的 PDU 称为比特流，数据链路层的 PDU

称为帧，网络层的 PDU 称为分组，传输层的 POU 称为报文段。 当在各层之间传输数据时，将从第 n+l 层收到的 PDU 作为第 n 层的 SDU ，加匕第 n 层的 PCl，就封装成了第 n 层的 PDU ，交给第 n-1 层后作为 SDU 发送，接收方接收时做相反的处埋， 因此可知三者的关系为 n-SDU + n-PCI = n-PDU = (n - 1)-SDU, 具变换过程如图l.7 所示。

具体地，层次结构的含义包括如下几方面：

l) 第 n 层的实体不仅要使用第 n-l 层的服务来实现自身定义的功能，而且要向第 n+ I 层 提供本层的服务，该服务是第 n 层及其下面各层提供的服务总和。

2) 最低层只提供服务，是整个层次结构的基础；最高层面向用户提供服务。

3) 上一层只能通过相邻层间的接口使用下一层的服务，而不能调用其他层的服务。

4) 当两台主机通信时，对等层在逻辑上有一个直接信道，表现为能直接将信息传送到 对方。

![image-20240119203420851](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/image-20240119203420851.png)





### 计算机网络协议、接口、服务的概念

### *!* ***协议&服务***

#### **概念**

- Layer 层：使用了信息隐蔽、抽象数据类型以及面向对象的设计方法； 目的是向上层提供服务，上层可以使用其提供的服务，但对于其内部的状态和算法不可见
- Service 服务：下层（n-1）给上层（n）提供服务，垂直的
- Protocol 协议：对等层关于如何进行通信的一种约定，是对改成功能如何实现的一种定义，水平的
- Interface 接口：在每一对相邻层之间的临界处，下层通过接口向上层服务
- 封装：某层实体在上一层交付数据前面（或后面）加上自己的控制信息，构成本层数据包，这些控制信息由协议定义
- 实体（entity） ：任何可发送或接收信息的硬件或软件进程
- 服务访问点 SAP （Service Access Point）：同一系统相邻两层的实体进行交互的地方，标识符叫做 SAPI

#### **关系**

- 协议是“水平的”，即协议是控制对等实体之间通信的规则
- 服务是“垂直的”，即服务是由下层向上层通过层间接口提供的
- 在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。
- 一层协议的实现需要下层的服务
- 服务的实现需要本层协议的支持
- 本层的服务用户只能看见服务而无法看见下面的协议
- 下层协议对上层服务用户是透明的
- 服务不变时，本层协议的实现改变不影响上层

> k 层服务改变，k+1 层随之改变，k-1 层不受影响

#### **tips**

- 为什么分层？

> ①简化网络的设计和实现的难度；②各层之间依赖性较低，只要不改变服务和接口，各层内部进行修改不会影响其它层
>
> 可能缺点：加上控制信息和处理的开销，性能比不分层的系统要差

- 每一层的对等实体之间进行通信，通信要遵守协议
- 只有最底层是实际通信，其它各层都是虚拟通信
- Information flow（数据流向）：U 形，发送系统自顶向下，最底层实际传输数据，接收系统自底向上

1.2.2

I.协议

要在网络中做到有条不紊地交换数据，就必须遴循一些事先约定好的规则，其规定了所交换

数据的格式及有关的同步问题。为了在网络中进行数据交换而建立的这些规则、标准或约定称为

网络协议 (Network Protocol), 是控制在对等实体之间进行通信的规则的集合，是水平的。不对 等实体之间是没有协议的，如用 TCP/LP 协议栈通信的两个结点 A 和结点 B, 结点 A 的传输层和 结点 B 的传输层之间存在协议，但结点 A 的传输层和结点 B 的网络层之1，司不存在协议。 协议由语法、语义和同步三部分组成。

"

..i上执， ►

同步的定义（2020)

l) 语法。数据与控制信息的格式。例如，

TCP 报文段格式就是由 TCP 协议的语法定义的。

2) 语义．即需要发出何种控制信息、完成何种动作及做出何种应答。例如，在建立 TCP 连

接的三次握手时所执行的操作就是由 TCP 协议的语义定义的。 3) 同步（或时序）。执行各种操作的条件、时序关系等，即事件实现顺序的详细说明。例如，

建立 TCP 连接的三次握手橾作的时序关系就是由 TCP 协议的同步定义的。

2. 挂口

同一结点内相邻两层的实体交换信息的逻辑接口称为服务访问点 (Service Access Po int,

SAP) 。每层只能为紧邻的层之间定义接口，而不能跨层定义接口。服务是通过 SAP 提供给上层 使用的，第 n 层的 SAP 就是第 n+l 层可以访问第 n 层服务的地方。例如，在本书描述的 5 层体 系结构中，数据链路层的服务访问点为帧的＂类型”字段，网络层的服务访问点为 IP 数据报的“协 议”字段，传输层的服务访问点为“端口号”字段。

3. 股务

服务是指下层为紧邻的上层提供的功能调用，是垂直的。对等实体在协议的控制下，使得本

层能为上层提供服务，但要实现本层协议，还需要使用下层提供的服务。当上层使用下层提供的服务时，必须与下层交换一些命令，这些命令称为服务原语。 OSI 参考模型将原语划分为四类：

l) 请求 (Request)。由服务用户发往服务提供者，诮求完成某项工作。

2) 指示<Ind ication) 。巾服务提供者发往服务用户，指示用户做某件事情。

3) 响应

(Response) 。由服务用户发往服务提供者，作为对指示的响应。

4) 证实（Confirmation) 。由服务提供者发往服务用户，作为对请求的证实。 这四类原语用千不同的功能，如建立连接、传输数据和断开连接等。有应答服务包括全部四 类原语，而无应答服务则只有请求和指示两类原语。四类原语的关系如图1.8 所示。

![image-20240119203527303](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/image-20240119203527303.png)

注意，协议和服务概念上是不一样的。首先，只有本层协议的实现才能保证向上一层提供服 务。本层的服务用户只能看见服务而无法看见下面的协议，即下面的协议对上层的服务用户是透 明的。其次，协议是“水平的＂，即协议是控制对等实体之间通信的规则。但是，服务是“垂直

堕，即服务是由下层通过层间接口向上层提供的。另外，并非在一层内完成的全部功能都称为

服务，只有那些能够被高一层实体“看得见”的功能才称为服务。

![image-20240119203554429](https://picture2023-1309715649.cos.ap-beijing.myqcloud.com/img/image-20240119203554429.png)

计算机网络提供的服务可按以下三种方式分类。 (I) 面向连接服务与无连接服务

在面向连接服务中，通信前双方必须先建立连接，分配相应的资源（如缓冲区），以保证通

信能正常进行，传输结束后释放连接和占用的资源。因此这种服务可分为连接建立、数据传输和

连接释放三个阶段。例如， TCP 就是一种面向连接服务的协议。 在无连接服务中，通信前双方不需要先建立连接，需要发送数据时可直接发送，将每个带有

目的地址的包（报文分组）传送到线路上，由系统选定路线进行传输。这种服务常被描述为“尽 最大努力交付＂，是一种不可靠的服务。例如， IP、 VDP 就是一种无连接服务的协议。

(2) 可靠服务和不可靠服务

可靠服务是指网络具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地。不

可靠服务是指网络只是尽批让数据正确、可靠地传送到目的地，是一种尽力而为的服务。

对于提供不可靠服务的网络，其网络的正确性、可靠性要由应用或用户来保陓。例如，用户 收到信息后要判断信息的正确性，若不正确，则用户就要把出错信息报告给信息的发送者，以便 发送者采取纠正措施。通过用户的这些措施，可将不可靠服务变成可靠服务。

(3) 有应答服务和无应答服务 有应答服务是指接收方在收到数据后向发送方给出相应的应答，该应答由传输系统内部自动

实现，而不由用户实现。发送的应答既可以是肯定应答，又可以是否定应答，通常在接收到的数

据有错误时发送否定应答。例如，文件传输服务就是一种有应答服务。 无应答服务是指接收方收到数据后不自动给出应答。若衙要应答，则由离层实现。例如，对 千 WWW 服务，客户端收到服务器发送的页面文件后不给出应答。



### ***面向连接 & 无连接***

#### **服务**

- 面向连接服务：3 个阶段 ①连接建立②数据传输③连接释放
- 无连接服务：两实体间通信不需要先建立连接；每个报文携带完整目标地址，可建立独立路由
- 服务原语：一个服务通常是由一组原语操作描述，用户进程通过这些操作访问该服务 

#### **区别**

- 通信双方是否需要建立连接
- 能保证数据传输的可靠性
- 通信过程中是否需要完整的目的地地址

#### **举例**

- UDP 为无连接通信协议示例
- TCP 是面向连接通信协议示例

## ISO/OSI 参考模型和 TCP/IP模型

